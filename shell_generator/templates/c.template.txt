#include "{include}"

/* HELPER CONSTANTS */

static const int _SH_INIT_BUFFER = 23;

/* EXPORTED VARIABLES */

char *sh_last_command;
char *sh_prompt_symbol = "{prompt_symbol}";

/* EXPORTED FUNCTIONS */

{handle_command_functions}

{parse_command_function}

void sh_loop() {{
    SH_STATE state = SH_CONTINUE;

    int n_words;
    char *command, **words;

    sh_last_command = strdup("");

    while (state != SH_EXIT) {{
        printf("%s", sh_prompt_symbol);
        fflush(stdout);
        command = txt_readline();
        free(sh_last_command);
        sh_last_command = strdup(command);
        words = txt_splitline(command, &n_words);
        state = sh_parse_command(words, n_words);

        free(command);
        txt_free_string_array(words, n_words);
    }}
}}